#!/usr/bin/env python

# move but preserve stated directory structure
# e.g.   mv a/b/c d   creates d/c  but   mvpath a/b/c d   creates d/a/b/c

import sys
import string
from subprocess import Popen, PIPE

for arg in sys.argv[1:len(sys.argv)-1]:
    p = string.rfind(arg, '/')
    path = arg[0:p+1]
    print('mkdir -p '+sys.argv[-1]+path)
    Popen('mkdir -p '+sys.argv[-1]+path, shell=True)
    print('mv '+arg+' '+sys.argv[-1]+path)
    Popen('mv '+arg+' '+sys.argv[-1]+path, shell=True)
